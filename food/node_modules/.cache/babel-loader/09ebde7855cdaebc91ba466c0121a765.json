{"ast":null,"code":"import _defineProperty from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Table,Button,Modal,ModalHeader,ModalBody,ModalFooter}from'reactstrap';import Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ViewOrder=/*#__PURE__*/function(_Component){_inherits(ViewOrder,_Component);var _super=_createSuper(ViewOrder);function ViewOrder(props){var _this;_classCallCheck(this,ViewOrder);_this=_super.call(this,props);_this.handleViewOrder=function(orderId){_this.setState({modal:!_this.state.modal,orderDate:orderId});Axios.get(\"http://localhost:90/order/\".concat(orderId),_this.state.config).then(function(response){var data=response.data;_this.setState({viewOrder:data});console.log(_this.state.viewOrder);}).catch(function(err){return console.log(err.response);});};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.state={user:'',modal:false,food:'',quanity:'',orderDate:'',totprice:'',totAmt:0,orders:[],viewOrder:[],config:{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}}};_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));return _this;}_createClass(ViewOrder,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Axios.get('http://localhost:90/order',this.state.config).then(function(response){var data=response.data;_this2.setState({orders:data});console.log(data);}).catch(function(err){return console.log(err.response);});}},{key:\"toggle\",value:function toggle(){this.setState({modal:!this.state.modal});}},{key:\"render\",value:function render(){var _this3=this;this.state.totAmt=this.state.viewOrder.reduce(function(prevValue,currentValue){return prevValue+currentValue.food.price*currentValue.quanity;},0);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Table,{hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{class:\"h4\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"Ordered date & time\"}),/*#__PURE__*/_jsx(\"th\",{children:\"View Order\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.orders.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h5\",{children:order._id})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-primary\",onClick:function onClick(){return _this3.handleViewOrder(order._id);},children:\"View Invoice\"})})]},order._id);})})]}),/*#__PURE__*/_jsxs(Modal,{size:\"md\",isOpen:this.state.modal,modalTransition:{timeout:200},backdropTransition:{timeout:300},toggle:this.toggle,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.toggle,style:{color:'#1f618d',backgroundColor:'#F4F6F6'},children:/*#__PURE__*/_jsx(\"h3\",{children:\"Food\"})}),/*#__PURE__*/_jsxs(ModalBody,{className:\"printDiv\",style:{backgroundColor:'#F8F9F9'},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"billHeader\",children:\"Food\"}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Ordered Date : \",/*#__PURE__*/_jsxs(\"span\",{class:\"h6\",children:[\" \",this.state.orderDate,\" \"]})]}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Name : \",/*#__PURE__*/_jsxs(\"span\",{class:\"h6\",children:[\" \",localStorage.getItem('fullname'),\" \"]})]}),/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Food Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.viewOrder.map(function(listItem){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:listItem.food.foodname}),/*#__PURE__*/_jsx(\"td\",{children:listItem.quanity}),/*#__PURE__*/_jsx(\"td\",{children:listItem.food.price}),/*#__PURE__*/_jsx(\"td\",{children:listItem.food.price*listItem.quanity})]},listItem._id);})}),/*#__PURE__*/_jsx(\"tfoot\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",align:\"right\",children:/*#__PURE__*/_jsxs(\"h4\",{style:{color:'#34495E'},children:[\"Total Amount: Rs \",this.state.totAmt]})})})})]})]}),/*#__PURE__*/_jsx(ModalFooter,{style:{backgroundColor:'#F4F6F6'},children:/*#__PURE__*/_jsx(Button,{color:\"secondary\",onClick:this.toggle,children:\"Close\"})})]})]});}}]);return ViewOrder;}(Component);export{ViewOrder as default};","map":{"version":3,"sources":["C:/Users/Dell/Downloads/Agile/food/src/Container/User_dahboard/vieworder.js"],"names":["React","Component","Table","Button","Modal","ModalHeader","ModalBody","ModalFooter","Axios","ViewOrder","props","handleViewOrder","orderId","setState","modal","state","orderDate","get","config","then","response","data","viewOrder","console","log","catch","err","handleChange","e","target","name","value","user","food","quanity","totprice","totAmt","orders","headers","localStorage","getItem","toggle","bind","reduce","prevValue","currentValue","price","map","order","_id","timeout","color","backgroundColor","listItem","foodname"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Table, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport Axios from 'axios';\r\n\r\n\r\nexport default class ViewOrder extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n    \r\n        this.state = {\r\n            user : '',\r\n            modal:false,\r\n            food : '',\r\n            quanity : '',\r\n            orderDate:'',\r\n            totprice: '',\r\n            totAmt:0,\r\n            orders: [],\r\n            viewOrder:[],\r\n            config: {\r\n                headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }\r\n            }\r\n        }\r\n        this.toggle = this.toggle.bind(this);\r\n    }\r\n    \r\n    componentDidMount() {\r\n      Axios.get('http://localhost:90/order',this.state.config)\r\n        .then((response)=>{\r\n          const data = response.data;\r\n          this.setState({\r\n          orders: data\r\n          });\r\n          console.log(data);\r\n        }).catch((err) => console.log(err.response));\r\n    }\r\n\r\n    toggle() {\r\n      this.setState({\r\n        modal: !this.state.modal\r\n      })\r\n    }\r\n\r\n    handleViewOrder=(orderId)=>{\r\n      this.setState({\r\n        modal: !this.state.modal,\r\n        orderDate:orderId\r\n      })\r\n      Axios.get(`http://localhost:90/order/${orderId}`, this.state.config)\r\n        .then((response)=>{\r\n          const data = response.data;\r\n          this.setState({viewOrder:data});\r\n          console.log(this.state.viewOrder);\r\n        }).catch((err)=>console.log(err.response));\r\n    }\r\n\r\n    handleChange = (e) => {\r\n      this.setState({\r\n          [e.target.name]: e.target.value\r\n      })\r\n    }\r\n    \r\n    render() {\r\n      this.state.totAmt = this.state.viewOrder.reduce(\r\n        (prevValue, currentValue) => prevValue + currentValue.food.price*currentValue.quanity,0);\r\n        return (\r\n            <div>\r\n   \r\n              <Table hover>\r\n                <thead>\r\n                  <tr class='h4'>\r\n                    <th>Ordered date & time</th>\r\n                    <th>View Order</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {\r\n                  this.state.orders.map(order => {\r\n                    return(\r\n                      <tr key={order._id}>\r\n                          <td>\r\n                          <h5>{order._id}</h5>\r\n                          </td>\r\n                          <td><button type=\"button\" class=\"btn btn-primary\"\r\n                          onClick={() => this.handleViewOrder(order._id)}>View Invoice</button></td>\r\n                      </tr>\r\n                    )})\r\n                  }\r\n                </tbody>\r\n              </Table>\r\n\r\n              <Modal size=\"md\" isOpen={this.state.modal} modalTransition={{ timeout: 200 }} backdropTransition={{ timeout: 300 }}\r\n                toggle={this.toggle}>\r\n                <ModalHeader toggle={this.toggle} style={{color:'#1f618d', backgroundColor:'#F4F6F6'}}>\r\n                  <h3>Food</h3>\r\n                </ModalHeader>\r\n                <ModalBody className=\"printDiv\" style={{backgroundColor:'#F8F9F9'}}>\r\n                  <h3 className=\"billHeader\">Food</h3>\r\n                  <h5>Ordered Date : <span class=\"h6\"> {this.state.orderDate} </span></h5>\r\n                  <h5>Name : <span class=\"h6\"> {localStorage.getItem('fullname')} </span></h5>\r\n                  <Table>\r\n                    <thead>\r\n                    <tr>\r\n                        \r\n                      <th>Food Name</th>\r\n                      <th>Quantity</th>\r\n                      <th>Price</th>\r\n                      <th>Total Price</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {\r\n                        this.state.viewOrder.map(listItem=>{\r\n                          return(\r\n                            <tr key={listItem._id}>\r\n                               \r\n                              <td>{listItem.food.foodname}</td>\r\n                              <td>{listItem.quanity}</td>\r\n                              <td>{listItem.food.price}</td>\r\n                              <td>{listItem.food.price*listItem.quanity}</td>\r\n                            </tr>\r\n                          )\r\n                        })\r\n                      }\r\n                    </tbody>\r\n                    <tfoot>\r\n                      <tr>\r\n                        <td colSpan=\"4\" align=\"right\">\r\n                          <h4 style={{color:'#34495E'}}>Total Amount: Rs {this.state.totAmt}</h4>\r\n                        </td>\r\n                      </tr>\r\n                    </tfoot>\r\n                  </Table>\r\n                </ModalBody>\r\n                <ModalFooter style={{backgroundColor:'#F4F6F6'}}>\r\n                  <Button color=\"secondary\" onClick={this.toggle}>Close</Button>\r\n                </ModalFooter>\r\n              </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}