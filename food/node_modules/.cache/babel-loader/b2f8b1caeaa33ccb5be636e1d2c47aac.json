{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Downloads\\\\Agile\\\\food\\\\src\\\\Container\\\\User_dahboard\\\\Profile.js\";\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport { Button, Modal, ModalHeader, ModalBody, Form, Input, Label, FormGroup } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Profile extends Component {\n  constructor(props) {\n    super(props);\n\n    this.openModal = () => {\n      this.setState({\n        isShow: !this.state.isShow\n      });\n    };\n\n    this.handleupdate = e => {\n      e.preventDefault();\n      Axios.put('http://localhost:90/users/me', this.state.user, this.state.config).then(response => {\n        console.log(response.data);\n        localStorage.setItem('fullname', response.data.fullname);\n        alert(\"Profile updated successfully\");\n        this.props.history.push('/viewProfile');\n      }).catch(err => console.log(err.response));\n    };\n\n    this.changePassword = e => {\n      e.preventDefault();\n\n      if (this.state.newPassword != this.state.retypePassword) {\n        alert(\"Password did not matched\");\n      } else {\n        Axios.put('http://localhost:90/users/updatePassword', {\n          password: this.state.newPassword,\n          id: this.state.user._id\n        }, this.state.config).then(response => {\n          if (response.data.status === 200) {\n            alert(\"Password changed successfully\");\n            window.location.reload();\n          }\n        }).catch(err => console.log(err.response));\n      }\n    };\n\n    this.verifyPassword = e => {\n      e.preventDefault();\n      let passwordValue = this.state.currentPassword;\n      let userIdValue = this.state.user._id;\n      Axios.post('http://localhost:90/users/verifyPassword', {\n        password: passwordValue,\n        id: userIdValue\n      }, this.state.config).then(response => {\n        console.log(response.data);\n\n        if (response.data.status === 200) {\n          this.setState({\n            newPass: true,\n            currentPassword: ''\n          });\n          e.target.value = \"\";\n        } else {\n          alert(\"Invalid Password\");\n        }\n      }).catch(err => console.log(err.response));\n    };\n\n    this.state = {\n      user: null,\n      isShow: false,\n      currentPassword: '',\n      newPassword: '',\n      retypePassword: '',\n      newPass: false,\n      config: {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    Axios.get('http://localhost:90/users/me', this.state.config).then(response => {\n      this.setState({\n        user: response.data\n      });\n    });\n  }\n\n  handleChange(e) {\n    this.setState({\n      user: { ...this.state.user,\n        [e.target.name]: e.target.value\n      }\n    });\n  }\n\n  handlePasswordChange(e) {\n    e.preventDefault();\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  render() {\n    if (this.state.user === null) {\n      return /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Loading ...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"col-md-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Update Profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"float-left\",\n              children: \"Full Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"fullname\",\n              className: \"form-control\",\n              value: this.state.user.fullname,\n              onChange: e => this.handleChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"float-left\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"email\",\n              className: \"form-control\",\n              value: this.state.user.email,\n              onChange: e => this.handleChange(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary btn-block\",\n            onClick: this.handleupdate,\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            onClick: this.openModal,\n            className: \"btn btn-danger btn-block\",\n            style: {\n              cursor: 'pointer'\n            },\n            children: \"Change password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          isOpen: this.state.isShow,\n          toggle: this.openModal,\n          children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n            children: /*#__PURE__*/_jsxDEV(\"legend\", {\n              children: \"Change Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 34\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              children: this.state.newPass ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    children: \"New password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Input, {\n                    type: \"password\",\n                    onChange: e => this.handlePasswordChange(e),\n                    name: \"newPassword\",\n                    className: \"form-control\",\n                    placeholder: \"Enter new password\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    children: \"Retype password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Input, {\n                    type: \"password\",\n                    onChange: e => this.handlePasswordChange(e),\n                    name: \"retypePassword\",\n                    className: \"form-control\",\n                    placeholder: \"Retype new password\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  onClick: this.changePassword,\n                  color: \"primary\",\n                  size: \"lg\",\n                  block: true,\n                  children: \"Update password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n                  children: [/*#__PURE__*/_jsxDEV(Label, {\n                    children: \"Current password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Input, {\n                    type: \"password\",\n                    onChange: e => this.handlePasswordChange(e),\n                    name: \"currentPassword\",\n                    className: \"form-control\",\n                    placeholder: \"Enter current password\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  onClick: this.verifyPassword,\n                  color: \"primary\",\n                  size: \"lg\",\n                  block: true,\n                  children: \"Verify password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this);\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Dell/Downloads/Agile/food/src/Container/User_dahboard/Profile.js"],"names":["React","Component","Axios","Button","Modal","ModalHeader","ModalBody","Form","Input","Label","FormGroup","Profile","constructor","props","openModal","setState","isShow","state","handleupdate","e","preventDefault","put","user","config","then","response","console","log","data","localStorage","setItem","fullname","alert","history","push","catch","err","changePassword","newPassword","retypePassword","password","id","_id","status","window","location","reload","verifyPassword","passwordValue","currentPassword","userIdValue","post","newPass","target","value","headers","getItem","componentDidMount","get","handleChange","name","handlePasswordChange","render","email","cursor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Axios from 'axios';\r\nimport {\r\n    Button,\r\n    Modal,\r\n    ModalHeader,\r\n    ModalBody,\r\n    Form,\r\n    Input,\r\n    Label,\r\n    FormGroup\r\n  } from 'reactstrap';\r\n\r\nexport default class Profile extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            user: null,\r\n            isShow:false,\r\n            currentPassword:'',\r\n            newPassword:'',\r\n            retypePassword:'',\r\n            newPass:false,\r\n            config: {\r\n                headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        Axios.get('http://localhost:90/users/me', this.state.config)\r\n            .then((response) => {\r\n                this.setState({\r\n                    user: response.data\r\n                })\r\n            });\r\n    }\r\n\r\n    openModal = () =>{\r\n        this.setState({\r\n            isShow: !this.state.isShow\r\n        })\r\n    }\r\n    \r\n    handleupdate = (e) => {\r\n        e.preventDefault();\r\n        Axios.put('http://localhost:90/users/me', this.state.user, this.state.config)\r\n            .then((response) => {\r\n                console.log(response.data);\r\n                localStorage.setItem('fullname', response.data.fullname);\r\n                alert(\"Profile updated successfully\")\r\n                this.props.history.push('/viewProfile');\r\n            })\r\n            .catch((err) => console.log(err.response));\r\n    }\r\n\r\n    changePassword = (e) => {\r\n        e.preventDefault();\r\n        if(this.state.newPassword!=this.state.retypePassword){\r\n            alert(\"Password did not matched\");\r\n        }\r\n        else{\r\n            Axios.put('http://localhost:90/users/updatePassword', {password:this.state.newPassword, id:this.state.user._id}, this.state.config)\r\n                .then((response) => {\r\n                    if(response.data.status===200){\r\n                        alert(\"Password changed successfully\");\r\n                        window.location.reload();\r\n                    }\r\n                })\r\n                .catch((err) => console.log(err.response));\r\n        }\r\n    }\r\n\r\n    verifyPassword = (e) => {\r\n        e.preventDefault();\r\n        let passwordValue = this.state.currentPassword;\r\n        let userIdValue = this.state.user._id;\r\n        Axios.post('http://localhost:90/users/verifyPassword', {password:passwordValue, id:userIdValue},  this.state.config)\r\n            .then((response) => {\r\n                console.log(response.data);\r\n                if (response.data.status===200){\r\n                    this.setState({\r\n                        newPass:true,\r\n                        currentPassword:''\r\n                    })\r\n                    e.target.value=\"\";\r\n                }\r\n                else{\r\n                    alert(\"Invalid Password\");\r\n                }\r\n            })\r\n            .catch((err) => console.log(err.response));\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({\r\n            user: { ...this.state.user, [e.target.name]: e.target.value }\r\n        })\r\n    }\r\n\r\n    handlePasswordChange(e){\r\n        e.preventDefault();\r\n        this.setState({\r\n            [e.target.name]:e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        if (this.state.user === null) {\r\n            return <h3>Loading ...</h3>\r\n        } else {\r\n        return (\r\n            <div className=\"container\">\r\n               \r\n                <br/>\r\n                <form className=\"col-md-6\">\r\n                    <legend><h3>Update Profile</h3></legend>\r\n                    <div className=\"form-group\">\r\n                        <label className=\"float-left\">Full Name</label>\r\n                        <input type=\"text\" name=\"fullname\" className=\"form-control\"\r\n                        value={this.state.user.fullname}  onChange={(e) => this.handleChange(e)} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label className=\"float-left\">Email</label>\r\n                        <input type=\"text\" name=\"email\" className=\"form-control\"\r\n                        value={this.state.user.email}  onChange={(e) => this.handleChange(e)}  />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"btn btn-primary btn-block\" onClick={this.handleupdate}>Update</button>\r\n                    <a onClick={this.openModal} className=\"btn btn-danger btn-block\" style={{cursor:'pointer'}}>Change password</a>\r\n                </form>\r\n\r\n                <Modal isOpen={this.state.isShow} toggle={this.openModal}>\r\n                    <ModalHeader><legend>Change Password</legend></ModalHeader>\r\n                    <ModalBody>\r\n                        <Form>\r\n                            {this.state.newPass?\r\n                                (\r\n                                    <div>\r\n                                    <FormGroup>\r\n                                        <Label>New password</Label>\r\n                                        <Input type=\"password\" onChange={(e) => this.handlePasswordChange(e)} name=\"newPassword\" className=\"form-control\" placeholder=\"Enter new password\" required/>\r\n                                    </FormGroup>\r\n\r\n                                    <FormGroup>\r\n                                        <Label>Retype password</Label>\r\n                                        <Input type=\"password\" onChange={(e) => this.handlePasswordChange(e)} name=\"retypePassword\" className=\"form-control\" placeholder=\"Retype new password\" required/>\r\n                                    </FormGroup>\r\n                                    <Button type=\"submit\" onClick={this.changePassword} color=\"primary\" size=\"lg\" block>Update password</Button>\r\n                                    </div>\r\n                                )\r\n                                :\r\n                                (\r\n                                    <div>\r\n                                        <FormGroup>\r\n                                            <Label>Current password</Label>\r\n                                            <Input type=\"password\" onChange={(e) => this.handlePasswordChange(e)} name=\"currentPassword\" className=\"form-control\" placeholder=\"Enter current password\" required/>\r\n                                        </FormGroup>\r\n                                        <Button type=\"submit\"  onClick={this.verifyPassword} color=\"primary\" size=\"lg\" block>Verify password</Button>\r\n                                    </div>\r\n                                )\r\n                            }\r\n                        </Form>\r\n                    </ModalBody>    \r\n                </Modal>\r\n            </div>\r\n        )}\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}