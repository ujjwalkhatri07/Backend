{"ast":null,"code":"import _defineProperty from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Button,FormGroup,Label,Row,Input,Modal,ModalHeader,ModalBody,ModalFooter,Form,Col}from'reactstrap';import axios from'axios';import ListFoods from'./ListFoods';import{MdAdd}from\"react-icons/md\";import NumberFormat from\"react-number-format\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddFood=/*#__PURE__*/function(_Component){_inherits(AddFood,_Component);var _super=_createSuper(AddFood);function AddFood(props){var _this;_classCallCheck(this,AddFood);_this=_super.call(this,props);_this.handleFileSelect=function(e){_this.setState({selectedFile:e.target.files[0],imgPreview:URL.createObjectURL(e.target.files[0])});};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.addCat=function(e){e.preventDefault();var data=new FormData();data.append('imageFile',_this.state.selectedFile);axios.post('http://localhost:90/upload',data,_this.state.config).then(function(response){_this.setState({catImg:response.data.filename});axios.post('http://localhost:90/foodCat',{category:_this.state.category,catImg:_this.state.catImg},_this.state.config).then(function(response){console.log(response);alert(\"Category added successfully\");window.location.reload();}).catch(function(err){return console.log(err.response);});}).catch(function(err){return console.log(err.response);});};_this.addFood=function(){var data=new FormData();data.append('imageFile',_this.state.selectedFile);axios.post('http://localhost:90/upload',data,_this.state.config).then(function(response){_this.setState({foodimage:response.data.filename});axios.post('http://localhost:90/foods',{foodname:_this.state.foodname,price:_this.state.price,foodimage:_this.state.foodimage,restaurant:_this.state.resSelect,category:_this.state.catSelect},_this.state.config).then(function(response){console.log(response);alert(\"Food added successfully\");window.location.reload();}).catch(function(err){return console.log(err.response);});}).catch(function(err){return console.log(err.response);});};_this.state={_id:null,foodname:null,price:null,foodimage:null,resturant:[],categorys:[],resSelect:'',catSelect:'',modal:false,imgPreview:null,config:{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}},selectedFile:null};_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));return _this;}_createClass(AddFood,[{key:\"toggle\",value:function toggle(){this.setState({modal:!this.state.modal});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('http://localhost:90/resturants',this.state.config).then(function(response){var data=response.data;_this2.setState({resturant:data,resSelect:data[0]._id});}).catch(function(error){return console.log(error.response);});axios.get('http://localhost:90/foodCat',this.state.config).then(function(response){var data=response.data;_this2.setState({categorys:data,imgPreview:data.catImg,catSelect:data[0]._id});}).catch(function(err){return console.log(err.response);});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:6,className:\"text-left mt-4\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Add Food\"})})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"col-10\",children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"foodname\",children:/*#__PURE__*/_jsx(\"legend\",{style:{fontSize:18},children:\"Food Name\"})}),/*#__PURE__*/_jsx(Input,{type:\"text\",id:\"foodname\",name:\"foodname\",onChange:this.handleChange,required:true})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"foodprice\",children:/*#__PURE__*/_jsx(\"legend\",{style:{fontSize:18},children:\"Food price\"})}),/*#__PURE__*/_jsx(Input,{id:\"foodprice\",name:\"price\",customInput:Input,onChange:this.handleChange,thousandSeparator:true,required:true})]})})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(FormGroup,{className:\"mt-1\",children:[/*#__PURE__*/_jsx(Label,{for:\"resOption\",children:/*#__PURE__*/_jsx(\"legend\",{style:{fontSize:18},children:\"Choose Restaurant: \"})}),/*#__PURE__*/_jsx(\"select\",{onChange:this.handleChange,value:this.state.resSelect,name:\"resSelect\",id:\"resOption\",style:{width:200,textAlign:'center'},children:this.state.resturant.map(function(option){return/*#__PURE__*/_jsx(\"option\",{value:option._id,children:option.resturant_name},option._id);})})]})}),/*#__PURE__*/_jsx(Col,{md:4,className:\"mt-1\",children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"catOption\",children:/*#__PURE__*/_jsx(\"legend\",{style:{fontSize:18},children:\"Choose Category: \"})}),/*#__PURE__*/_jsx(\"span\",{children:\" \"}),/*#__PURE__*/_jsx(\"select\",{onChange:this.handleChange,value:this.state.catSelect,name:\"catSelect\",id:\"catOption\",style:{width:200,textAlign:'center'},children:this.state.categorys.map(function(option){return/*#__PURE__*/_jsx(\"option\",{value:option._id,children:option.category},option._id);})}),' ']})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(FormGroup,{style:{display:\"ruby\"},children:[/*#__PURE__*/_jsx(Label,{className:\"btn btn-primary float-left\",htmlFor:\"filePicker\",children:\"Upload image for food\"}),/*#__PURE__*/_jsx(Input,{id:\"filePicker\",style:{visibility:\"hidden\"},type:\"file\",name:\"food_image\",onChange:this.handleFileSelect})]})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[/*#__PURE__*/_jsx(\"img\",{alt:\"Img Preview\",style:{width:200},src:this.state.imgPreview}),/*#__PURE__*/_jsx(\"hr\",{})]})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",color:\"danger\",style:{width:500},onClick:this.addFood,block:true,children:\"Add Food\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(ListFoods,{}),/*#__PURE__*/_jsxs(Modal,{isOpen:this.state.modal,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.toggle,children:/*#__PURE__*/_jsx(\"legend\",{children:\"Add Food Category\"})}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Enter category name\",name:\"category\",onChange:this.handleChange})}),/*#__PURE__*/_jsxs(FormGroup,{style:{display:\"ruby\"},children:[/*#__PURE__*/_jsx(Label,{className:\"btn btn-outline-info float-left\",htmlFor:\"filePicker\",children:\"Upload image for food category\"}),/*#__PURE__*/_jsx(Input,{id:\"filePicker\",style:{visibility:\"hidden\"},type:\"file\",name:\"catImg\",onChange:this.handleFileSelect}),/*#__PURE__*/_jsx(\"img\",{alt:\"Image Preview\",style:{display:'block',border:'1px solid gray',width:\"200px\",height:\"200px\",textAlign:'center'},width:\"200\",src:this.state.imgPreview})]})]}),/*#__PURE__*/_jsx(ModalFooter,{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-block\",id:\"btnbag\",onClick:this.addCat,children:\"Add Category\"})})]})]})});}}]);return AddFood;}(Component);export{AddFood as default};","map":{"version":3,"sources":["C:/Users/Dell/Downloads/Agile/food/src/Container/Foods.js"],"names":["React","Component","Button","FormGroup","Label","Row","Input","Modal","ModalHeader","ModalBody","ModalFooter","Form","Col","axios","ListFoods","MdAdd","NumberFormat","AddFood","props","handleFileSelect","e","setState","selectedFile","target","files","imgPreview","URL","createObjectURL","handleChange","name","value","addCat","preventDefault","data","FormData","append","state","post","config","then","response","catImg","filename","category","console","log","alert","window","location","reload","catch","err","addFood","foodimage","foodname","price","restaurant","resSelect","catSelect","_id","resturant","categorys","modal","headers","localStorage","getItem","toggle","bind","get","error","fontSize","width","textAlign","map","option","resturant_name","display","visibility","border","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Button, FormGroup, Label, Row, Input, Modal, ModalHeader, ModalBody, ModalFooter, Form, Col } from 'reactstrap'\r\nimport axios from 'axios'\r\nimport ListFoods from './ListFoods'\r\n\r\nimport { MdAdd } from \"react-icons/md\";\r\nimport NumberFormat from \"react-number-format\";\r\n\r\nexport default class AddFood extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            _id: null,\r\n            foodname: null,\r\n            price : null,\r\n            foodimage: null,\r\n            resturant:[],\r\n            categorys:[],\r\n            resSelect:'',\r\n            catSelect:'',\r\n            modal:false,\r\n            imgPreview:null,\r\n            config: {\r\n                headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }\r\n            },\r\n            selectedFile: null,\r\n        }\r\n        this.toggle = this.toggle.bind(this)\r\n    }\r\n\r\n    toggle(){\r\n        this.setState({\r\n            modal:!this.state.modal\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('http://localhost:90/resturants',this.state.config)\r\n        .then((response)=>{\r\n          const data = response.data;\r\n          this.setState({\r\n              resturant: data,\r\n              resSelect:data[0]._id\r\n            });        \r\n        }).catch(error => console.log(error.response));\r\n\r\n        axios.get('http://localhost:90/foodCat', this.state.config)\r\n        .then((response)=>{\r\n            const data = response.data;\r\n            this.setState({\r\n                categorys:data,\r\n                imgPreview:data.catImg,\r\n                catSelect:data[0]._id\r\n            });\r\n        }).catch(err=>console.log(err.response));\r\n      }\r\n    \r\n   handleFileSelect  = (e) =>{\r\n        this.setState({\r\n            selectedFile: e.target.files[0],\r\n            imgPreview:URL.createObjectURL(e.target.files[0])\r\n        })\r\n    }\r\n\r\n    handleChange = (e)  =>{\r\n        this.setState({\r\n            [e.target.name]: e.target.value \r\n        })\r\n    }\r\n\r\n    addCat = (e) => {\r\n        e.preventDefault();\r\n        const data = new FormData()\r\n        data.append('imageFile', this.state.selectedFile)\r\n        axios.post('http://localhost:90/upload', data, this.state.config)\r\n            .then((response) => {\r\n                this.setState({\r\n                    catImg: response.data.filename\r\n                })\r\n            axios.post('http://localhost:90/foodCat',\r\n            {\r\n              category:this.state.category,\r\n              catImg:this.state.catImg\r\n            }, this.state.config)\r\n                .then((response)=>{\r\n                    console.log(response)\r\n                    alert(\"Category added successfully\")\r\n                    window.location.reload()\r\n                }).catch((err)=>console.log(err.response))\r\n            }).catch((err) => console.log(err.response))\r\n    }\r\n  \r\n    addFood = () => {\r\n        const data = new FormData()\r\n        data.append('imageFile', this.state.selectedFile)\r\n        axios.post('http://localhost:90/upload', data, this.state.config)\r\n            .then((response) => {\r\n                this.setState({\r\n                    foodimage: response.data.filename\r\n                })\r\n                axios.post('http://localhost:90/foods', \r\n                {\r\n                    foodname:this.state.foodname,\r\n                    price:this.state.price,\r\n                    foodimage:this.state.foodimage,\r\n                    restaurant:this.state.resSelect,\r\n                    category:this.state.catSelect,\r\n                }, this.state.config)\r\n                    .then((response) => {\r\n                        console.log(response);\r\n                        alert(\"Food added successfully\");\r\n                        window.location.reload();\r\n                    })\r\n                    .catch((err) => console.log(err.response))\r\n            }).catch((err) => console.log(err.response))\r\n    }\r\n\r\n    render() {      \r\n        return (\r\n            <>\r\n         \r\n            <div className=\"container\">\r\n                <Row>\r\n                    <Col md={6} className=\"text-left mt-4\">\r\n                        <h2>Add Food</h2>\r\n                    </Col>\r\n                    {/* <Col md={6} className=\"text-right mt-4\">\r\n                        <Button color='primary' onClick={this.toggle}>\r\n                            <MdAdd style={{fontSize:\"30px\", color:\"white\"}} />\r\n                            Add Food Category\r\n                        </Button>\r\n                    </Col> */}\r\n                </Row>\r\n                <hr/>\r\n                <form className=\"col-10\">\r\n                    <Row>\r\n                        <Col md={4}>\r\n                            <FormGroup>\r\n                                <Label for='foodname'>\r\n                                    <legend style={{fontSize:18}}>Food Name</legend>\r\n                                </Label>\r\n                                <Input type='text' id=\"foodname\" name='foodname' onChange={this.handleChange} required/>\r\n                            </FormGroup>\r\n                        </Col>\r\n                        <Col md={4}>\r\n                            <FormGroup>\r\n                                <Label for='foodprice'>\r\n                                    <legend style={{fontSize:18}}>Food price</legend>\r\n                                </Label>\r\n                                <Input id='foodprice' name='price'\r\n                                    customInput={Input} \r\n                                    onChange={ this.handleChange}\r\n                                    thousandSeparator \r\n                                    required\r\n                                />\r\n                            </FormGroup>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <Row>\r\n                        <Col md={4}>\r\n                            <FormGroup className=\"mt-1\">\r\n                                <Label for='resOption'>\r\n                                    <legend style={{fontSize:18}}>Choose Restaurant: </legend>\r\n                                </Label>\r\n                                <select onChange={this.handleChange} value={this.state.resSelect} name='resSelect' id='resOption' style={{width:200, textAlign:'center'}}>\r\n                                    {\r\n                                        this.state.resturant.map(option=>\r\n                                            <option key={option._id} value={option._id}>{option.resturant_name}</option>\r\n                                        )\r\n                                    }\r\n                                </select>\r\n                            </FormGroup>\r\n                        </Col>\r\n                        <Col md={4} className=\"mt-1\">\r\n                            <FormGroup>\r\n                                <Label for='catOption'>\r\n                                    <legend style={{fontSize:18}}>Choose Category: </legend>\r\n                                </Label>\r\n                                <span> </span>\r\n                                <select onChange={this.handleChange} value={this.state.catSelect} name='catSelect' id='catOption' style={{width:200, textAlign:'center'}}>\r\n                                {\r\n                                    this.state.categorys.map(option=>\r\n                                        <option key={option._id} value={option._id}>{option.category}</option>\r\n                                    )\r\n                                }\r\n                                </select>\r\n                                {' '}\r\n                            </FormGroup>\r\n                        </Col>\r\n                    </Row>\r\n                    <br/>\r\n                    <Row>\r\n                        <Col md={3}>\r\n                            <FormGroup style={{display: \"ruby\"}}>\r\n                                <Label className=\"btn btn-primary float-left\" htmlFor=\"filePicker\">Upload image for food</Label>\r\n                                <Input id=\"filePicker\" style={{visibility:\"hidden\"}} type='file' name='food_image' onChange={this.handleFileSelect}/>\r\n                            </FormGroup>\r\n                        </Col>\r\n                        <Col md={2}>\r\n                            <img alt=\"Img Preview\" style={{width:200}} src={this.state.imgPreview}/><hr/>\r\n                         </Col>\r\n                    </Row>\r\n                    <Button type=\"submit\" color='danger' style={{width:500}} onClick={this.addFood} block>Add Food</Button>\r\n                <br/>\r\n                </form>\r\n              <ListFoods />\r\n\r\n              <Modal isOpen={this.state.modal}>\r\n                <ModalHeader toggle={this.toggle}><legend>Add Food Category</legend></ModalHeader>\r\n                <ModalBody>\r\n                  <FormGroup>\r\n                    <Input type=\"text\" placeholder=\"Enter category name\" name=\"category\" onChange={this.handleChange} />\r\n                  </FormGroup>\r\n                  <FormGroup style={{display: \"ruby\"}}>\r\n                    <Label className=\"btn btn-outline-info float-left\" htmlFor=\"filePicker\">Upload image for food category</Label>\r\n                    <Input id=\"filePicker\" style={{visibility:\"hidden\"}} type='file' name='catImg' onChange={this.handleFileSelect}/>\r\n                    <img alt=\"Image Preview\"\r\n                      style={{display:'block', border: '1px solid gray', width:\"200px\", height:\"200px\", textAlign:'center'}} \r\n                      width='200' src={this.state.imgPreview}\r\n                    />\r\n                  </FormGroup>\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                    <button className=\"btn btn-success btn-block\" id=\"btnbag\" onClick={this.addCat}>Add Category</button>\r\n                </ModalFooter>\r\n              </Modal>\r\n            </div>\r\n            </>\r\n            )\r\n        }    \r\n    }\r\n    \r\n"]},"metadata":{},"sourceType":"module"}