{"ast":null,"code":"import _defineProperty from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Row,Col,Modal,ModalHeader,ModalBody,ModalFooter,Container}from'reactstrap';import Axios from'axios';import'./category.css';import{FiSearch}from\"react-icons/fi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Category=/*#__PURE__*/function(_Component){_inherits(Category,_Component);var _super=_createSuper(Category);function Category(props){var _this;_classCallCheck(this,Category);_this=_super.call(this,props);_this.searchFood=function(catId,catName){Axios.get(\"http://localhost:90/foods/searchByCat/\".concat(catId),_this.state.config).then(function(response){var data=response.data;if(data[0]!=null){_this.setState({foods:response.data,catName:'Results for : '+catName});console.log(_this.state.catName);}else{_this.setState({catName:'No results found for : '+catName,foods:[]});}});};_this.handleFood=function(foodId){_this.setState({modal:!_this.state.modal});Axios.get(\"http://localhost:90/foods/\".concat(foodId),_this.state.config).then(function(response){var data=response.data;_this.setState({food:data,totalprice:data.price});console.log(\"data fecth\");}).catch(function(error){return console.log(error.response);});};_this.searchbyName=function(e){if(e.target.value!=null){console.log(e.target.value);Axios.get(\"http://localhost:90/foods/searchByName/\".concat(e.target.value),_this.state.config).then(function(response){var data=response.data.food;console.log(response.data.food);if(data.length!==0){_this.setState({foods:data,searchedFoods:'Results for : '+e.target.value});}else{_this.setState({foods:null,searchedFoods:'No Results found for : '+e.target.value});}}).catch(function(err){return console.log(err.response);});}};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.state={category:[],foods:[],food:[],catName:'',notes:'',quantity:'1',totalprice:'',searchedFoods:'',modal:false,config:{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}}};_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));return _this;}_createClass(Category,[{key:\"toggle\",value:function toggle(){this.setState({modal:!this.state.modal});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Axios.get('http://localhost:90/foodCat',this.state.config).then(function(response){console.log(response.data);_this2.setState({category:response.data});}).catch(function(err){return console.log(err.response);});}},{key:\"addCart\",value:function addCart(){var _this3=this;var token=localStorage.getItem('token');if(token!=null){//   if(localStorage.getItem('token'!=null)){\nAxios.post(\"http://localhost:90/cart/\",{food:this.state.food._id,totalprice:this.state.totalprice*this.state.quantity,notes:this.state.notes,quanity:this.state.quantity},this.state.config).then(function(response){console.log(response);alert(\"added to cart\");_this3.setState({modal:!_this3.state.modal});}).catch(function(err){return console.log(err.response);});}else{alert(\"Please login to add cart\");}}},{key:\"render\",value:function render(){var _this4=this,_jsx2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:12,children:/*#__PURE__*/_jsxs(\"span\",{children:[\"What would you like to order ?\",' ',/*#__PURE__*/_jsx(\"input\",{style:{border:'none',borderBottom:'2px solid #1ABC9C'},type:\"text\",name:\"search\",id:\"search\",placeholder:\"search food...\",onChange:this.searchbyName}),/*#__PURE__*/_jsx(FiSearch,{style:{fontSize:\"30px\",opacity:0.6}})]})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Row,{children:this.state.category.map(function(catIcon){return/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return _this4.searchFood(catIcon._id,catIcon.category);},style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"img\",{alt:\"catPic\",style:{width:'40px',height:'40px'},className:\"categoryList\",src:\"http://localhost:90/pictures/\".concat(catIcon.catImg),id:\"catImg\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"text-center\",children:catIcon.category})]},catIcon._id)});})})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:'FireBrick'},children:this.state.catName?this.state.catName:''}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'FireBrick'},className:\"text-left\",children:this.state.searchedFoods?this.state.searchedFoods:''}),/*#__PURE__*/_jsx(Row,{children:this.state.foods!=null?this.state.foods.map(function(food){return/*#__PURE__*/_jsx(\"div\",{className:\"Col-md-4\",id:\"product\",children:/*#__PURE__*/_jsxs(\"figure\",{className:\"card card-product p-2\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"foodPic\",width:\"250\",height:\"150\",src:\"http://localhost:90/pictures/\".concat(food.foodimage)}),/*#__PURE__*/_jsxs(\"figcaption\",{class:\"info-wrap\",children:[/*#__PURE__*/_jsx(\"legend\",{className:\"title\",children:food.foodname}),/*#__PURE__*/_jsxs(\"h6\",{className:\"title\",children:[\"Rs. \",food.price]})]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-primary\",onClick:function onClick(){return _this4.handleFood(food._id);},children:\"Add to cart\"})]})});}):''})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:this.state.modal,children:[/*#__PURE__*/_jsxs(ModalHeader,{toggle:this.toggle,children:[\"Item : \",this.state.food.foodname,/*#__PURE__*/_jsx(\"br\",{}),\"Price : Rs.\",this.state.food.price]}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Add notes\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"notes\",className:\"col-md-10\",value:this.state.notes,placeholder:\"Customize food as your taste\",name:\"notes\",onChange:this.handleChange}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Add quantity\"}),/*#__PURE__*/_jsx(\"input\",(_jsx2={type:\"number\",pattern:\"[0-9]*\",name:\"quantity\",min:1,value:this.state.quantity,onChange:this.handleChange},_defineProperty(_jsx2,\"min\",\"1\"),_defineProperty(_jsx2,\"max\",\"100\"),_jsx2))]}),/*#__PURE__*/_jsx(ModalFooter,{children:/*#__PURE__*/_jsx(Container,{id:\"ftr\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-lg btn-success\",id:\"btnbag\",onClick:function onClick(){return _this4.addCart(_this4.state.food._id);},children:\"Add to cart\"})})})]})]});}}]);return Category;}(Component);export{Category as default};","map":{"version":3,"sources":["C:/Users/Dell/Downloads/Agile/food/src/Container/User_dahboard/Category.js"],"names":["React","Component","Row","Col","Modal","ModalHeader","ModalBody","ModalFooter","Container","Axios","FiSearch","Category","props","searchFood","catId","catName","get","state","config","then","response","data","setState","foods","console","log","handleFood","foodId","modal","food","totalprice","price","catch","error","searchbyName","e","target","value","length","searchedFoods","err","handleChange","name","category","notes","quantity","headers","localStorage","getItem","toggle","bind","token","post","_id","quanity","alert","border","borderBottom","fontSize","opacity","map","catIcon","cursor","width","height","catImg","color","foodimage","foodname","addCart"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport {Row,Col,Modal,ModalHeader,ModalBody,ModalFooter,Container} from  'reactstrap';\r\nimport Axios from 'axios'\r\nimport   './category.css';\r\nimport { FiSearch } from \"react-icons/fi\";\r\n\r\nexport default class Category extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n    \r\n        this.state = {\r\n            category:[],  \r\n            foods:[],\r\n            food:[],\r\n            catName:'',\r\n            notes:'',\r\n            quantity:'1',\r\n            totalprice:'',\r\n            searchedFoods:'',\r\n            modal:false,\r\n            config: {\r\n                headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }\r\n            },\r\n        }\r\n        this.toggle = this.toggle.bind(this);\r\n    }\r\n\r\n    toggle(){\r\n        this.setState({\r\n          modal:!this.state.modal\r\n        })\r\n    }  \r\n\r\n    componentDidMount() {\r\n        Axios.get('http://localhost:90/foodCat', this.state.config)\r\n          .then((response) => {\r\n            console.log(response.data)\r\n            this.setState({\r\n              category: response.data\r\n            })\r\n          })\r\n          .catch((err) => console.log(err.response));\r\n    }\r\n\r\n    searchFood=(catId, catName)=>{\r\n       Axios.get(`http://localhost:90/foods/searchByCat/${catId}`, this.state.config)\r\n        .then((response)=>{\r\n            const data=response.data\r\n            if(data[0]!=null){\r\n                this.setState({\r\n                    foods:response.data,\r\n                    catName:'Results for : '+ catName\r\n                })\r\n                console.log(this.state.catName)\r\n            }\r\n            else{\r\n                this.setState({\r\n                    catName :'No results found for : '+ catName,\r\n                    foods:[]\r\n                })   \r\n            }\r\n        })\r\n    }\r\n\r\n    handleFood = (foodId) => {\r\n        this.setState({\r\n          modal: !this.state.modal\r\n        })\r\n        Axios.get(`http://localhost:90/foods/${foodId}`, this.state.config)\r\n          .then((response) => {\r\n            const data = response.data;\r\n            this.setState({\r\n              food: data,\r\n              totalprice: data.price\r\n            });\r\n            console.log(\"data fecth\");\r\n          }).catch(error => console.log(error.response));\r\n    }\r\n\r\n    addCart(){\r\n        var token=localStorage.getItem('token')\r\n        if(token!=null){\r\n        //   if(localStorage.getItem('token'!=null)){\r\n            \r\n            Axios.post(`http://localhost:90/cart/`,\r\n              {\r\n                food: this.state.food._id,\r\n                totalprice: (this.state.totalprice * this.state.quantity),\r\n                notes: this.state.notes,\r\n                quanity: this.state.quantity\r\n              }, this.state.config)\r\n              .then((response) => {\r\n                console.log(response);\r\n                alert(\"added to cart\");\r\n                this.setState({\r\n                  modal: !this.state.modal\r\n            \r\n                }\r\n                \r\n                )\r\n              }).catch((err) => console.log(err.response));\r\n          }\r\n        else{\r\n            alert(\"Please login to add cart\");\r\n          }\r\n    }\r\n\r\n    searchbyName=(e)=>{\r\n        if(e.target.value!=null){\r\n            console.log(e.target.value)\r\n            Axios.get(`http://localhost:90/foods/searchByName/${e.target.value}`, this.state.config)\r\n            .then((response)=>{\r\n                const data = response.data.food;\r\n                console.log(response.data.food)\r\n                if(data.length!==0){\r\n                    this.setState({\r\n                        foods:data,\r\n                        searchedFoods:'Results for : '+ e.target.value\r\n                    })\r\n                }\r\n                else{\r\n                    this.setState({\r\n                        foods:null,\r\n                        searchedFoods:'No Results found for : '+e.target.value\r\n                    })\r\n                }\r\n            }).catch((err)=>console.log(err.response))\r\n        }\r\n    }\r\n\r\n\r\n    handleChange = (e) => {\r\n        this.setState({\r\n          [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"container\">\r\n                    <Row>\r\n                        <Col md={12}>\r\n                            <span>What would you like to order ?{' '}\r\n                                <input style={{border: 'none',\r\n                                    borderBottom: '2px solid #1ABC9C'}} \r\n                                    type=\"text\" name=\"search\" id=\"search\" placeholder=\"search food...\" \r\n                                    onChange={this.searchbyName}/>\r\n                                <FiSearch style={{fontSize:\"30px\", opacity:0.6}}/>\r\n                            </span>\r\n                        </Col>\r\n                    </Row>\r\n                    <br/>\r\n                    \r\n                    <Row>\r\n                        {this.state.category.map(catIcon =>\r\n                        <Col>\r\n                            <div key={catIcon._id} onClick={()=>this.searchFood(catIcon._id, catIcon.category)} style={{cursor:'pointer'}}>\r\n                                <img alt=\"catPic\" \r\n                                    style={{ width:'40px', height:'40px'}}\r\n                                    className=\"categoryList\"\r\n                                    src ={`http://localhost:90/pictures/${catIcon.catImg}`} id=\"catImg\"/> \r\n                                <h6 className=\"text-center\">{catIcon.category}</h6>\r\n                            </div>\r\n                        </Col>\r\n                        )}\r\n                    </Row>    \r\n                </div>\r\n                <hr/>\r\n                <div className=\"container\">\r\n                    <h3 style={{color:'FireBrick'}}>{this.state.catName?this.state.catName:''}</h3>\r\n                    <h3 style={{color:'FireBrick'}} className=\"text-left\">{this.state.searchedFoods?this.state.searchedFoods:''}</h3>\r\n                    <Row>\r\n                        {this.state.foods!=null ?                     \r\n                        this.state.foods.map((food => \r\n                            <div className=\"Col-md-4\" id=\"product\">\r\n                                <figure className=\"card card-product p-2\">\r\n                                    <img alt=\"foodPic\" width='250' height='150' src={`http://localhost:90/pictures/${food.foodimage}`}/>\r\n                                    <figcaption class=\"info-wrap\">\r\n                                        <legend className=\"title\">{food.foodname}</legend>\r\n                                        <h6 className=\"title\">Rs. {food.price}</h6>\r\n                                    </figcaption>\r\n                                    <button class=\"btn btn-primary\" onClick={()=>this.handleFood(food._id)}>Add to cart</button>\r\n                                </figure>\r\n                            </div>\r\n                            )):''}\r\n                    </Row>\r\n                </div>\r\n\r\n                <Modal isOpen={this.state.modal}>\r\n                    <ModalHeader toggle={this.toggle}>Item : {this.state.food.foodname}<br/>\r\n                            Price : Rs.{this.state.food.price}\r\n                    </ModalHeader>\r\n                    <ModalBody>\r\n                        <p>Add notes</p>\r\n                        <textarea id=\"notes\" className=\"col-md-10\" value={this.state.notes} placeholder=\"Customize food as your taste\" name=\"notes\" onChange={this.handleChange}></textarea>\r\n                        <hr/>\r\n                        <p>Add quantity</p>\r\n                        <input type=\"number\" pattern=\"[0-9]*\" name=\"quantity\" min={1} value={this.state.quantity} onChange={this.handleChange} min=\"1\" max=\"100\" />\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Container id=\"ftr\">\r\n                        <button className=\"btn btn-lg btn-success\" id=\"btnbag\" onClick={() => this.addCart(this.state.food._id)}>Add to cart</button>\r\n                        </Container>\r\n                    </ModalFooter>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}