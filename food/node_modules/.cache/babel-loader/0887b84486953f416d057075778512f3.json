{"ast":null,"code":"import _objectSpread from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Dell/Downloads/Agile/food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Table,Button,Modal,ModalHeader,ModalBody,ModalFooter,Input,FormGroup,Label}from'reactstrap';import Axios from'axios';import{MdAdd}from\"react-icons/md\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ListFoods=/*#__PURE__*/function(_Component){_inherits(ListFoods,_Component);var _super=_createSuper(ListFoods);function ListFoods(props){var _this;_classCallCheck(this,ListFoods);_this=_super.call(this,props);_this.toggle=function(){_this.setState({modal:!_this.state.modal});};_this.toggle1=function(){_this.setState({modal1:!_this.state.modal1});};_this.handleChange=function(e){_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.deleteCat=function(catId){Axios.delete(\"http://localhost:90/foodCat/\".concat(catId),_this.state.config).then(function(response){window.location.reload(false);}).catch(function(err){return console.log(err.response);});};_this.handleEdit=function(catId){_this.setState({modal:!_this.state.modal});Axios.get(\"http://localhost:90/foodCat/\".concat(catId),_this.state.config).then(function(response){var data=response.data;_this.setState({category:data,imgPreview:\"http://localhost:90/pictures/\".concat(data.catImg)});console.log(_this.state.imgPreview);}).catch(function(error){return console.log(error.response);});};_this.handleupdate=function(e){_this.setState({category:_objectSpread(_objectSpread({},_this.state.category),{},_defineProperty({},e.target.name,e.target.value))});};_this.handleFileSelect=function(e){_this.setState({selectedFile:e.target.files[0],imgPreview:URL.createObjectURL(e.target.files[0])});};_this.addCat=function(e){e.preventDefault();var data=new FormData();data.append('imageFile',_this.state.selectedFile);Axios.post('http://localhost:90/upload',data,_this.state.config).then(function(response){_this.setState({catImg:response.data.filename});Axios.post('http://localhost:90/foodCat',{category:_this.state.category,catImg:_this.state.catImg},_this.state.config).then(function(response){console.log(response);alert(\"Category added successfully\");window.location.reload();}).catch(function(err){return console.log(err.response);});}).catch(function(err){return console.log(err.response);});};_this.updateCat=function(catId){var data=new FormData();data.append('imageFile',_this.state.selectedFile);Axios.post('http://localhost:90/upload',data,_this.state.config).then(function(response){_this.setState({catImg:response.data.filename});Axios.put(\"http://localhost:90/foodCat/\".concat(catId),{category:_this.state.category.category,catImg:_this.state.catImg},_this.state.config).then(function(response){alert(\"Category updated successfully\");console.log(response.data);window.location.reload();}).catch(function(err){return console.log(err.response);});}).catch(function(err){return console.log(err.response);});};_this.state={categories:[],category:[],modal:false,modal1:false,imgPreview:null,selectedFile:null,config:{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}}};_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));return _this;}_createClass(ListFoods,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Axios.get('http://localhost:90/foodCat',this.state.config).then(function(response){var data=response.data;_this2.setState({categories:data});console.log(data);}).catch(function(err){return console.log(err.response);});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Add Food Category\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(Button,{color:\"primary\",style:{float:\"right\"},onClick:this.toggle1,children:[/*#__PURE__*/_jsx(MdAdd,{style:{fontSize:\"30px\",color:\"white\"}}),\"Add Food Category\"]})})]}),/*#__PURE__*/_jsxs(Table,{hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Category Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category Image\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Update\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[this.state.categories.map(function(cat){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:cat.category}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{alt:\"catIcon\",src:\"http://localhost:90/pictures/\".concat(cat.catImg),style:{height:\"50px\",width:\"50px\"}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"btn btn-primary\",onClick:function onClick(){return _this3.handleEdit(cat._id);},children:\"Update\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return _this3.deleteCat(cat._id);},className:\"btn btn-danger\",children:\"Delete\"})})]},cat._id);}),/*#__PURE__*/_jsxs(Modal,{isOpen:this.state.modal1,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.toggle1,children:/*#__PURE__*/_jsx(\"legend\",{children:\"Add Food Category\"})}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(Input,{type:\"text\",placeholder:\"Enter category name\",name:\"category\",onChange:this.handleChange})}),/*#__PURE__*/_jsxs(FormGroup,{style:{display:\"ruby\"},children:[/*#__PURE__*/_jsx(Label,{className:\"btn btn-outline-info float-left\",htmlFor:\"filePicker\",children:\"Upload image for food category\"}),/*#__PURE__*/_jsx(Input,{id:\"filePicker\",style:{visibility:\"hidden\"},type:\"file\",name:\"catImg\",onChange:this.handleFileSelect}),/*#__PURE__*/_jsx(\"img\",{alt:\"Image Preview\",style:{display:'block',border:'1px solid gray',width:\"200px\",height:\"200px\",textAlign:'center'},width:\"200\",src:this.state.imgPreview})]})]}),/*#__PURE__*/_jsx(ModalFooter,{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-block\",id:\"btnbag\",onClick:this.addCat,children:\"Add Category\"})})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:this.state.modal,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:this.toggle,children:/*#__PURE__*/_jsx(\"legend\",{children:\"Update Category\"})}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{style:{color:'DarkSlateGray',fontSize:18},children:\" Category Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"category\",className:\"form-control\",value:this.state.category.category,onChange:this.handleupdate}),/*#__PURE__*/_jsx(\"img\",{alt:\"Image Preview\",width:\"200\",src:this.state.imgPreview}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{style:{color:'DarkSlateGray',fontSize:18},children:\"Choose picture for category :\"}),/*#__PURE__*/_jsx(Input,{type:\"file\",name:\"foodimage\",onChange:this.handleFileSelect})]}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-primary btn-block\",onClick:function onClick(){return _this3.updateCat(_this3.state.category._id);},children:\"Update\"})]}),/*#__PURE__*/_jsx(ModalFooter,{})]})]})]})]})});}}]);return ListFoods;}(Component);export{ListFoods as default};","map":{"version":3,"sources":["C:/Users/Dell/Downloads/Agile/food/src/Container/FoodCategory.js"],"names":["React","Component","Table","Button","Modal","ModalHeader","ModalBody","ModalFooter","Input","FormGroup","Label","Axios","MdAdd","ListFoods","props","toggle","setState","modal","state","toggle1","modal1","handleChange","e","target","name","value","deleteCat","catId","delete","config","then","response","window","location","reload","catch","err","console","log","handleEdit","get","data","category","imgPreview","catImg","error","handleupdate","handleFileSelect","selectedFile","files","URL","createObjectURL","addCat","preventDefault","FormData","append","post","filename","alert","updateCat","put","categories","headers","localStorage","getItem","bind","float","fontSize","color","map","cat","height","width","_id","display","visibility","border","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Table, Button, Modal, ModalHeader, ModalBody, ModalFooter,Input, FormGroup, Label } from 'reactstrap';\r\nimport Axios from 'axios'\r\n\r\nimport { MdAdd } from \"react-icons/md\";\r\n\r\nexport default class ListFoods extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n          categories: [],\r\n          category:[],\r\n          modal : false,\r\n          modal1:false,\r\n          imgPreview:null,\r\n          selectedFile: null,\r\n          config: {\r\n            headers: { 'Authorization': `Bearer ${localStorage.getItem('token')}` }\r\n          },\r\n        }\r\n        this.toggle = this.toggle.bind(this);\r\n    } \r\n             \r\n    componentDidMount() {\r\n      Axios.get('http://localhost:90/foodCat', this.state.config)\r\n        .then((response)=>{\r\n            const data = response.data;\r\n            this.setState({categories:data});\r\n            console.log(data)\r\n        }).catch(err=>console.log(err.response));\r\n    }\r\n\r\n    toggle=()=>{ \r\n      this.setState({\r\n        modal: !this.state.modal\r\n    })}\r\n\r\n    toggle1=()=>{ \r\n      this.setState({\r\n        modal1: !this.state.modal1\r\n    })}\r\n          \r\n    handleChange = (e)  =>{\r\n      this.setState({\r\n        [e.target.name]: e.target.value \r\n      })\r\n    }\r\n\r\n    deleteCat = (catId) => {\r\n      Axios.delete(`http://localhost:90/foodCat/${catId}`, this.state.config)\r\n      .then((response) => {\r\n        window.location.reload(false)\r\n      }).catch(err=>console.log(err.response));\r\n    }\r\n\r\n    handleEdit = (catId) => {\r\n      this.setState({\r\n        modal: !this.state.modal\r\n      });\r\n      Axios.get(`http://localhost:90/foodCat/${catId}`,this.state.config)\r\n      .then((response)=>{\r\n        const data = response.data;\r\n          this.setState({\r\n            category: data,\r\n            imgPreview:`http://localhost:90/pictures/${data.catImg}`\r\n          });    \r\n        console.log(this.state.imgPreview)\r\n        })\r\n      .catch(error => console.log(error.response));\r\n    }\r\n\r\n    handleupdate = (e) =>{\r\n      this.setState({\r\n        category: { ...this.state.category, [e.target.name]: e.target.value }\r\n      })\r\n    }\r\n\r\n    handleFileSelect  = (e) =>{\r\n      this.setState({\r\n          selectedFile: e.target.files[0],\r\n          imgPreview:URL.createObjectURL(e.target.files[0])\r\n      })\r\n    }\r\n\r\n    addCat = (e) => {\r\n      e.preventDefault();\r\n        const data = new FormData()\r\n        data.append('imageFile', this.state.selectedFile)\r\n        Axios.post('http://localhost:90/upload', data, this.state.config)\r\n            .then((response) => {\r\n                this.setState({\r\n                    catImg: response.data.filename\r\n                })\r\n            Axios.post('http://localhost:90/foodCat',\r\n            {\r\n              category:this.state.category,\r\n              catImg:this.state.catImg\r\n            }, this.state.config)\r\n                .then((response)=>{\r\n                    console.log(response)\r\n                    alert(\"Category added successfully\")\r\n                    window.location.reload()\r\n                }).catch((err)=>console.log(err.response))\r\n            }).catch((err) => console.log(err.response))\r\n    }\r\n     //update category\r\n    updateCat = (catId) => {\r\n      const data = new FormData()\r\n      data.append('imageFile', this.state.selectedFile)\r\n      Axios.post('http://localhost:90/upload', data, this.state.config)\r\n        .then((response) => {\r\n          this.setState({\r\n            catImg: response.data.filename\r\n          })\r\n        Axios.put(`http://localhost:90/foodCat/${catId}`, \r\n        { \r\n          category: this.state.category.category,\r\n          catImg:this.state.catImg\r\n        }, this.state.config)\r\n        .then((response) => {\r\n          alert(\"Category updated successfully\")\r\n          console.log(response.data)\r\n          window.location.reload();\r\n        })\r\n        .catch((err)=>console.log(err.response))\r\n        }).catch((err) => console.log(err.response))\r\n    }\r\n    \r\n    render() \r\n    {\r\n        return (\r\n        <>\r\n   \r\n          <div className=\"container\">\r\n            <br/>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6\">\r\n                <h1>Add Food Category</h1>\r\n              </div>\r\n              <div className=\"col-md-6\">\r\n                  <Button color='primary' style={{float:\"right\"}} onClick={this.toggle1}>\r\n                    <MdAdd style={{fontSize:\"30px\", color:\"white\"}} />\r\n                    Add Food Category\r\n                  </Button>\r\n              </div>\r\n            </div>\r\n            <Table hover>\r\n            <thead>\r\n              <tr>\r\n                <th>Category Name</th>\r\n                <th>Category Image</th>\r\n                <th>Update</th>\r\n                <th>Delete</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {\r\n                this.state.categories.map(cat => \r\n                <tr key={cat._id}>\r\n                  <td>{cat.category}</td>\r\n                  <td>\r\n                    <img alt=\"catIcon\" src={`http://localhost:90/pictures/${cat.catImg}`} style={{height: \"50px\",width:\"50px\"}}/>\r\n                  </td>\r\n                  <td>\r\n                    <a className=\"btn btn-primary\" onClick={() => this.handleEdit(cat._id)}>Update</a>\r\n                  </td>\r\n                  <td>\r\n                    <a onClick={() => this.deleteCat(cat._id)} className=\"btn btn-danger\">Delete</a>\r\n                  </td>\r\n                </tr>\r\n                )\r\n              }\r\n\r\n              <Modal isOpen={this.state.modal1}>\r\n                <ModalHeader toggle={this.toggle1}><legend>Add Food Category</legend></ModalHeader>\r\n                <ModalBody>\r\n                  <FormGroup>\r\n                    <Input type=\"text\" placeholder=\"Enter category name\" name=\"category\" onChange={this.handleChange} />\r\n                  </FormGroup>\r\n                  <FormGroup style={{display: \"ruby\"}}>\r\n                    <Label className=\"btn btn-outline-info float-left\" htmlFor=\"filePicker\">Upload image for food category</Label>\r\n                    <Input id=\"filePicker\" style={{visibility:\"hidden\"}} type='file' name='catImg' onChange={this.handleFileSelect}/>\r\n                    <img alt=\"Image Preview\"\r\n                      style={{display:'block', border: '1px solid gray', width:\"200px\", height:\"200px\", textAlign:'center'}} \r\n                      width='200' src={this.state.imgPreview}\r\n                    />\r\n                  </FormGroup>\r\n                </ModalBody>\r\n                <ModalFooter>\r\n                    <button className=\"btn btn-danger btn-block\" id=\"btnbag\" onClick={this.addCat}>Add Category</button>\r\n                </ModalFooter>\r\n              </Modal>\r\n    \r\n              <Modal isOpen={this.state.modal}>\r\n                <ModalHeader toggle={this.toggle}><legend>Update Category</legend></ModalHeader>\r\n                <ModalBody>\r\n                    <div className=\"form-group\">\r\n                      <label style={{color:'DarkSlateGray', fontSize:18}}> Category Name</label>\r\n                      <input type=\"text\" name=\"category\" className=\"form-control\" \r\n                        value ={this.state.category.category} onChange={this.handleupdate}/>\r\n\r\n                      <img alt=\"Image Preview\" width='200' src={this.state.imgPreview}/><br/>\r\n                      <label style={{color:'DarkSlateGray', fontSize:18}}>Choose picture for category :</label>\r\n                      <Input type='file' name='foodimage' onChange={this.handleFileSelect}/>\r\n                      \r\n                    </div>\r\n                    <Button className=\"btn btn-primary btn-block\" \r\n                      onClick={() => this.updateCat(this.state.category._id)}>Update</Button>   \r\n                </ModalBody>\r\n                <ModalFooter></ModalFooter>\r\n              </Modal>\r\n            </tbody>\r\n          </Table>\r\n        </div>\r\n        </>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}